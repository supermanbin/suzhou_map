<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="renderer" content="webkit" />
    <title>苏州航道三维实景综合监管平台</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/swiper.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="header justify-sb">
      <div class="logo">
        <img src="./images/logo.png" alt="苏州航道三维实景综合监管平台" />
      </div>
      <div class="users aic">
        <div class="aic">
          <div class="user__avatar">
            <img src="./images/avatar.png" alt="" />
          </div>
          <div class="user__name">管理员</div>
        </div>
        <span class="user__fullscreen"></span>
      </div>
    </div>
    <!-- Left panel -->
    <div class="catalogue">
      <div class="catalogue__title">专题总览</div>
      <div class="menu">
        <div class="menu__mine">
          <span>生成我<br />的专题</span>
          <span>加载我<br />的专题</span>
          <span>关闭所<br />有要素</span>
        </div>
        <div class="menu__list">
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic" id="cultrueId">
              <span><input type="checkbox" id="" />大运河文化带</span>
              <i></i>
            </label>
            <div class="landscape">
              <label>
                <img src="./images/img-01.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>遗产</p>
                </div>
              </label>
              <label>
                <img src="./images/img-02.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>景区</p>
                </div>
              </label>
            </div>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic" id="courseId">
              <span
                ><input type="checkbox" name="menu" id="" />大运河生态带</span
              >
              <i></i>
            </label>
            <div class="landscape">
              <label>
                <img src="./images/img-03.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>绿化</p>
                </div>
              </label>
              <label>
                <img src="./images/img-04.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>环境监测</p>
                </div>
              </label>
              <label>
                <img src="./images/img-05.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>污水回收</p>
                </div>
              </label>
              <label>
                <img src="./images/img-06.png" alt="" />
                <div class="landscape__item-title">
                  <input type="checkbox" name="" id="" />
                  <p>充电桩</p>
                </div>
              </label>
            </div>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span
                ><input type="checkbox" name="menu" id="" />大运河经济带</span
              >
              <i></i>
            </label>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span
                ><input type="checkbox" name="menu" id="" />航道惠民服务</span
              >
              <i></i>
            </label>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span
                ><input type="checkbox" name="menu" id="" />航道工作状态</span
              >
              <i></i>
            </label>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span
                ><input type="checkbox" name="menu" id="" />大运河安全保障</span
              >
              <i></i>
            </label>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span
                ><input type="checkbox" name="menu" id="" />大运河现场监测</span
              >
              <i></i>
            </label>
          </div>
          <!-- item -->
          <div class="menu__item">
            <label class="menu__item__title aic">
              <span><input type="checkbox" name="menu" id="" />示范航线</span>
              <i></i>
            </label>
          </div>
        </div>
      </div>
    </div>
    <!-- Map tools -->
    <div class="map-tools">
      <div class="map-legend"></div>
      <div class="monitor aic">
        <span class="camera"></span><span class="view720"></span>
      </div>
      <div class="map-scale"></div>
    </div>
    <!-- Map -->
    <div class="map"></div>
    <!-- 文化遗产弹窗 -->
    <div id="cultrue" style="display: none;">
      <div class="locations aic">
        <div class="locations__total">
          <p>文化遗产点</p>
          <strong>9</strong><span>处</span>
        </div>
        <div class="locations__list">
          <span>运河故道</span>
          <span>虎丘云岩寺塔</span>
          <span>宝带桥</span>
          <span>古纤道</span>
          <span>寒山寺</span>
          <span>寒山寺</span>
          <span>寒山寺</span>
          <span>寒山寺</span>
          <span>寒山寺</span>
        </div>
      </div>
      <div class="left-item__intro">
        <h3>苏州航道文化遗产简介</h3>
        <div class="flex">
          <div class="swiper-container">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <img src="./images/pic_01.png" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="./images/pic_01.png" alt="" />
              </div>
              <div class="swiper-slide">
                <img src="./images/pic_01.png" alt="" />
              </div>
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination"></div>
          </div>
          <div class="infors">
            <p>
              苏州是大运河沿线唯一以“古城”概念申遗的城市，是大运河城市景观遗产的典型范例。苏州的运河故道、虎丘云岩寺塔、宝带桥、古纤道等7个相关点段被纳入中国大运河世界文化遗产目录。
            </p>
            <p>
              苏州古城的遗产包括5条运河故道、7个遗产点段，共12个点段构成”一带一环”为特征的遗产地图，清晰地勾勒了一座完整的苏州古城，这在众多运河城市中是绝无仅有的。
              试点航段内，主要包括了宝带桥、寒山寺和古纤道等。
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- 航道 -->
    <div id="course" class="course" style="display: none;">
      <div class="chart aic">
        <ul class="chart__tab">
          <li class="aic active">
            <i></i>
            <div class="chart__data">
              <p>绿化总里程</p>
              <div><strong>97.7</strong><span>公里</span></div>
            </div>
          </li>
          <li class="aic">
            <i></i>
            <div class="chart__data">
              <p>环境监测</p>
              <div><strong>9</strong><span>个</span></div>
            </div>
          </li>
          <li class="aic">
            <i></i>
            <div class="chart__data">
              <p>污水回收点</p>
              <div><strong>7</strong><span>个</span></div>
            </div>
          </li>
          <li class="aic">
            <i></i>
            <div class="chart__data">
              <p>充电桩</p>
              <div><strong>17</strong><span>个</span></div>
            </div>
          </li>
        </ul>
        <div class="chart__content"></div>
      </div>
      <div class="left-item__intro">
        <h3>苏州绿色环保航道建设</h3>
        <div class="infors">
          <p>
            苏州是大运河沿线唯一以“古城”概念申遗的城市，是大运河城市景观遗产的典型范例。苏州的运河故道、虎丘云岩寺塔、宝带桥、古纤道等7个相关点段被纳入中国大运河世界文化遗产目录。
          </p>
          <p>
            苏州古城的遗产包括5条运河故道、7个遗产点段，共12个点段构成”一带一环”为特征的遗产地图，清晰地勾勒了一座完整的苏州古城，这在众多运河城市中是绝无仅有的。
            试点航段内，主要包括了宝带桥、寒山寺和古纤道等。
          </p>
        </div>
      </div>
    </div>
    <!--  -->
    <script src="./js/jquery.1.9.1.min.js"></script>
    <script src="./js/swiper.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts.min.js"></script>
    <script>
      /**
       * Modal
       */

      (function (window, document) {
        var Modal = function (options) {
          var defaults = {
            title: '温馨提示',
            content: '',
            width: 440,
            height: 260,
            buttons: [
              {
                text: '确定',
                hideModal: true,
                onCallback: null,
              },
            ],
          };
          var opt = $.extend({}, defaults, options),
            _this = this,
            title = $(
              '<div class="pop__title aic"><span>' + opt.title + '</span></div>'
            ),
            content = $('<div class="pop__content"></div>').html(opt.content),
            // actions = $('<div class="jscg-alert__action"></div>'),
            len = opt.buttons.length;

          _this.ele = $('<div class="pop"></div>');
          _this.closeEle = $('<i></i>');
          title.append(_this.closeEle);
          _this.ele.append(title).append(content);
          _this.ele.css({
            width: opt.width + 'px',
            height: opt.height + 'px',
            'margin-top': -opt.height / 2 + 'px',
          });
          $('body').append(_this.ele);

          // for (var index = 0; index < len; index++) {
          //   var element = opt.buttons[index];
          //   var width = len == 1 ? 240 : 140;
          //   actions.append(
          //     '<button class="jscg-btn" style="width: ' +
          //       width +
          //       'px">' +
          //       element.text +
          //       '</button>'
          //   );
          // }
          // 关闭
          _this.closeEle.on('click', function () {
            _this.ele.remove();
          });

          // actions.on('click', '.jscg-btn', function () {
          //   var index = $(this).index(),
          //     btnItem = opt.buttons[index];
          //   if (btnItem.onCallback) {
          //     btnItem.onCallback();
          //     if (btnItem.hideModal) {
          //       _this.closeEle.click();
          //     }
          //   } else {
          //     _this.closeEle.click();
          //   }
          // });
        };

        Modal.prototype.show = function () {};
        Modal.prototype.hide = function () {
          // _this.close();
          this.closeEle.click();
        };

        window.Modal = Modal;
      })(window, document);

      var modal;

      var option1 = {
        title: {
          text: '各行政区绿化总里程分布',
          textStyle: { color: '#32eafa', fontSize: 16 },
          textAlign: 'left',
          left: 'center',
        },
        tooltip: {
          show: false,
        },

        series: [
          {
            name: '绿化总里程',
            type: 'pie',
            radius: ['40%', '60%'],
            color: [
              '#3bdd87',
              '#6ba4f1',
              '#32d7e6',
              '#3565f1',
              '#39c6a3',
              '#ae9a6f',
            ],
            avoidLabelOverlap: true,
            label: {
              show: true,
              formatter: function (params) {
                return params.name + '\n' + params.value + 'km';
              },
            },
            labelLine: {
              show: false,
              length: 8,
              length2: 13,
            },
            hoverOffset: 5,
            selectedOffset: 5,
            data: [
              { value: 28, name: '张家港' },
              { value: 22, name: '吴中' },
              { value: 12, name: '太仓1' },
              { value: 14, name: '太仓2' },
              { value: 13, name: '昆山' },
              { value: 11, name: '常熟' },
            ],
          },
        ],
      };
      var option3 = {
        title: {
          text: '各行政区污水回收设施分布',
          textStyle: { color: '#32eafa', fontSize: 16 },
          textAlign: 'left',
          left: 'center',
        },
        tooltip: {
          show: false,
        },

        series: [
          {
            name: '污水回收',
            type: 'pie',
            radius: ['40%', '60%'],
            color: [
              '#3bdd87',
              '#6ba4f1',
              '#32d7e6',
              '#3565f1',
              '#39c6a3',
              '#ae9a6f',
            ],
            avoidLabelOverlap: true,
            label: {
              show: true,
              formatter: function (params) {
                return params.name + '\n' + params.percent + '%';
              },
            },
            labelLine: {
              show: false,
              length: 8,
              length2: 13,
            },
            hoverOffset: 5,
            selectedOffset: 5,
            data: [
              { value: 2, name: '张家港' },
              { value: 0, name: '吴中' },
              { value: 1, name: '太仓1' },
              { value: 1, name: '太仓2' },
              { value: 0, name: '昆山' },
              { value: 1, name: '常熟' },
            ],
          },
        ],
      };
      var option2 = {
        title: {
          text: '各行政区环境监测设施分布',
          textStyle: { color: '#32eafa', fontSize: 16 },
          textAlign: 'left',
          left: 'center',
        },
        tooltip: {
          show: false,
        },

        series: [
          {
            name: '环境监测',
            type: 'pie',
            radius: ['40%', '60%'],
            color: [
              '#3bdd87',
              '#6ba4f1',
              '#32d7e6',
              '#3565f1',
              '#39c6a3',
              '#ae9a6f',
            ],
            avoidLabelOverlap: true,
            label: {
              show: true,
              formatter: function (params) {
                return params.name + '\n' + params.percent + '%';
              },
            },
            labelLine: {
              show: false,
              length: 8,
              length2: 13,
            },
            hoverOffset: 5,
            selectedOffset: 5,
            data: [
              { value: 2, name: '张家港' },
              { value: 1, name: '吴中' },
              { value: 2, name: '太仓1' },
              { value: 1, name: '太仓2' },
              { value: 1, name: '昆山' },
              { value: 1, name: '常熟' },
            ],
          },
        ],
      };
      var option4 = {
        title: {
          text: '各行政区充电桩设施分布',
          textStyle: { color: '#32eafa', fontSize: 16 },
          textAlign: 'left',
          left: 'center',
        },
        tooltip: {
          show: false,
        },

        series: [
          {
            name: '充电桩',
            type: 'pie',
            radius: ['40%', '60%'],
            color: [
              '#3bdd87',
              '#6ba4f1',
              '#32d7e6',
              '#3565f1',
              '#39c6a3',
              '#ae9a6f',
            ],
            avoidLabelOverlap: true,
            label: {
              show: true,
              formatter: function (params) {
                return params.name + '\n' + params.percent + '%';
              },
            },
            labelLine: {
              show: false,
              length: 8,
              length2: 13,
            },
            hoverOffset: 5,
            selectedOffset: 5,
            data: [
              { value: 2, name: '张家港' },
              { value: 1, name: '吴中' },
              { value: 2, name: '太仓1' },
              { value: 5, name: '太仓2' },
              { value: 3, name: '昆山' },
              { value: 4, name: '常熟' },
            ],
          },
        ],
      };

      var myChart;
      $('#courseId').on('change', 'span', function () {
        if ($(this).find('input:checked').length) {
          modal = new Modal({
            title: '苏州航道文化遗产总览',
            content: $('#course').html(),
            width: 650,
            height: 620,
          });
          var swiper = new Swiper('.swiper-container', {
            loop: true,
            pagination: {
              el: '.swiper-pagination',
              clickable: true,
            },
          });

          /// chart
          var content = $('.pop').find('.chart__content')[0];

          myChart = echarts.init(content);
          myChart.setOption(option1);
        } else {
          modal.hide();
        }
      });

      $('#cultrueId').on('change', 'span', function () {
        if ($(this).find('input:checked').length) {
          modal = new Modal({
            title: '苏州航道文化遗产总览',
            content: $('#cultrue').html(),
            width: 650,
            height: 620,
          });
          var swiper = new Swiper('.swiper-container', {
            loop: true,
            pagination: {
              el: '.swiper-pagination',
              clickable: true,
            },
          });
        } else {
          modal.hide();
        }
      });

      $('body').on('click', '.chart__tab li', function () {
        var index = $(this).index();
        console.log(index);
        $('.chart__tab li').removeClass('active');
        $(this).addClass('active');

        switch (index) {
          case 0:
            myChart.setOption(option1);
            break;
          case 1:
            myChart.setOption(option2);
            break;
          case 2:
            myChart.setOption(option3);
            break;
          case 3:
            myChart.setOption(option4);
            break;
          default:
            break;
        }
      });
    </script>
  </body>
</html>
